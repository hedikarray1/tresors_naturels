<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
    
    <img class="img-header" src="../../../assets/logo/logo.png">
   
  </ion-toolbar>
</ion-header>

<ion-content *ngIf="datashow">
  <ion-card class="product-card">

    <div class="product-image-container">
      <img src="{{product?.images[0]?.src}}" />
    </div>

    <ion-card-content>

      <ion-card-header class="product-info-container">

        <div class="product-name"><strong>{{product?.name}}</strong></div>

        <div class="container-row">
          <div class="product-price" [innerHTML]="product?.price_html"></div>
        </div>
        <br />
        <label class="text-size"><strong>Cat√©gory</strong> : </label>

        <div class="product-category-container">
          <span class="product-category" *ngFor="let category of product?.categories"> {{category?.name?.replace(rep,'&')}},</span>
        </div>

      </ion-card-header>
      <ion-item *ngIf="product?.type == 'variable'">
        <ion-label position="stacked">
          {{product?.attributes[0]?.name}}
        </ion-label>
        <ion-select placeholder="choisir une option"   [(ngModel)]="variationId">
          <ion-select-option *ngFor="let valop of variations" value="{{valop.id}}">{{valop.option}}</ion-select-option>
        </ion-select>
      </ion-item>
      <ion-item class="item-cart" *ngIf="product?.type == 'variable'">
      
        <ion-label>
          <div class="cart-input-container">

            <ion-button (click)="removeItem()" fill="clear" color="dark"[disabled]="itemQty<2" >
              <ion-icon name="remove-circle-outline"></ion-icon>
            </ion-button>

            <ion-button fill="clear" color="dark">
            {{itemQty}}
            </ion-button>

            <ion-button (click)="addItem()" fill="clear" color="dark">
              <ion-icon name="add-circle-outline"></ion-icon>
            </ion-button>

            <ion-button (click)="addToCartWithVariation(variationId)" class="button-save" [disabled]="variationId == 0" fill="outline" color="dark">
            Ajouter au panier
            </ion-button>
            
            
          </div>
        </ion-label>
      </ion-item>

      <ion-item class="item-cart" *ngIf="product?.type == 'simple'">
        <ion-label>
          <div class="cart-input-container">

            <ion-button (click)="removeItem()" fill="clear" color="dark"[disabled]="itemQty<2" >
              <ion-icon name="remove-circle-outline"></ion-icon>
            </ion-button>

            <ion-button fill="clear" color="dark">
            {{itemQty}}
            </ion-button>

            <ion-button (click)="addItem()" fill="clear" color="dark">
              <ion-icon name="add-circle-outline"></ion-icon>
            </ion-button>

            <ion-button (click)="addToCart()" class="button-save" fill="outline" color="dark">
            Ajouter au panier
            </ion-button>
            
            
          </div>
        </ion-label>
      </ion-item>

      
      <ion-segment [(ngModel)]="segmentValue">
        <ion-segment-button value="description" *ngIf="product?.description != ''">
          <ion-label>Description</ion-label>
        </ion-segment-button>
        <ion-segment-button value="information" *ngIf="product?.short_description != '' || product?.attributes != '' ">
          <ion-label>Informations</ion-label>
        </ion-segment-button>
      </ion-segment>
      <div *ngIf="segmentValue == 'information'">
        <!--
      <ul class="product-short_description" *ngIf="product?.short_description != ''">
        <strong>Contenance</strong>
        <li class="product-short_description" [innerHTML]="product?.short_description" ></li>
      </ul>

      <ul class="product-short_description">
       <strong> {{product?.attributes[0]?.name}}</strong> 
        <li class="product-short_description" *ngFor="let att of product?.attributes[0]?.options"> {{att}}</li>
      </ul>
      -->

        <ul class="product-short_description">
          <strong>Contenance</strong>
          <li class="product-short_description" [innerHTML]="product?.short_description"></li>
          <li class="product-short_description" *ngFor="let att of product?.attributes[0]?.options" [innerHTML]="att">
          </li>
        </ul>
      </div>

      <div *ngIf="segmentValue == 'description'" class="product-description" [innerHTML]="product?.description"></div>
    </ion-card-content>
  </ion-card>
  <br/>
  <ion-slides [options]="{ slidesPerView: 'auto', zoom: false, grabCursor: true }">
    <ion-slide *ngFor="let productc of relatedProducts" class="slide-product" >
      <ion-card class="slide-product-card" (click)="goToDetail(productc?.id)" >
        <div class="slide-product-image-container">
          <img src="{{productc?.images[0]?.src}}" />
        </div>
        <ion-card-content>
          <div class="slide-product-name">{{productc?.name}}</div>
          <div class="slide-product-category-container">
            <span class="slide-product-category" *ngFor="let category of productc?.categories"> {{category?.name?.replace(rep,'&')}},</span>
          </div>
          <div class="slide-product-price" [innerHTML]="productc?.price_html"></div>
        </ion-card-content>
      </ion-card>

    </ion-slide>
  </ion-slides>
</ion-content>